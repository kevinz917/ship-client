[{"/Users/K.Z./Desktop/ship-client/src/pages/leaderboard.js":"1","/Users/K.Z./Desktop/ship-client/src/pages/profile.js":"2"},{"size":8429,"mtime":1612929235367,"results":"3","hashOfConfig":"4"},{"size":3652,"mtime":1612929322300,"results":"5","hashOfConfig":"4"},{"filePath":"6","messages":"7","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"hhicam",{"filePath":"8","messages":"9","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"10"},"/Users/K.Z./Desktop/ship-client/src/pages/leaderboard.js",["11","12"],"/Users/K.Z./Desktop/ship-client/src/pages/profile.js",["13"],"import { useEffect, useState } from \"react\";\nimport { Row } from \"react-bootstrap\";\nimport { Header3 } from \"../global_styles/typography\";\nimport { MainBtn } from \"../global_styles/button\";\nimport { fetchUser, TogglePrivacy } from \"../api/user\";\nimport { fetchMyShips } from \"../api/ship\";\nimport { Body } from \"../global_styles/typography\";\nimport { Spinner } from \"../components/LoadingSpinner\";\nimport Votecard from \"../components/VoteCard\";\nimport { sendAmplitudeData } from \"../util/amplitude\";\nimport { COOKIE_DOMAIN } from \"../util/base\";\n\nconst sortFunc = (a, b) => {\n  const a_votes = a.votes + 10 * ((a.shippers ? a.shippers : 1) - 1);\n  const b_votes = b.votes + 10 * ((b.shippers ? b.shippers : 1) - 1);\n  return a_votes > b_votes ? -1 : 1;\n};\n\nconst Profile = () => {\n  sendAmplitudeData(\"visit_profile\");\n\n  const [userInfo, setUserInfo] = useState({ privacy: null });\n  const [isLoading, setIsloading] = useState(false);\n  const [isChanging, setIsChanging] = useState(false);\n  const [myShips, setMyShips] = useState([]);\n\n  const info = {\n    private: \"Others will not be able to vote on ships that includes you\",\n    public: \"Others can vote on ships that include you\",\n  };\n\n  useEffect(() => {\n    const onMount = async () => {\n      setIsloading(true);\n      let fetchedUser = await fetchUser();\n      setUserInfo(fetchedUser);\n\n      let fetchedShips = await fetchMyShips();\n      fetchedShips.sort(sortFunc);\n      setMyShips(fetchedShips);\n\n      setIsloading(false);\n    };\n\n    onMount();\n  }, []);\n\n  const togglePrivacy = async () => {\n    setIsChanging(true);\n    if (userInfo.privacy === \"public\") {\n      sendAmplitudeData(\"toggle_private\");\n      await TogglePrivacy(\"private\");\n    } else if (userInfo.privacy === \"private\") {\n      sendAmplitudeData(\"toggle_public\");\n      await TogglePrivacy(\"public\");\n    }\n    let fetchedUser = await fetchUser();\n    setUserInfo(fetchedUser);\n    setIsChanging(false);\n  };\n\n  // const Logout = () => {\n  //   sendAmplitudeData(\"log_out\");\n  //   // Clear cookies\n  //   console.log(COOKIE_DOMAIN);\n  //   document.cookie = `connect.sid=; expires=${new Date().toUTCString()}; domain=${COOKIE_DOMAIN}; path=/`;\n  //   // Redirect to home page and refresh as well\n  //   // window.location.pathname = \"/\";\n  // };\n\n  if (isLoading) {\n    return <Spinner />;\n  }\n\n  return (\n    <>\n      <div style={{ maxWidth: \"500px\" }} className=\"ml-auto mr-auto fade-in\">\n        <br />\n        <div style={{ padding: \"10px\" }} className=\"w-100\">\n          <Header3 className=\"mb-2\">My profile</Header3>\n          <Body>Privacy setting: {info[userInfo.privacy]}</Body>\n          {isChanging ? (\n            <Spinner />\n          ) : (\n            <MainBtn secondary onClick={() => togglePrivacy()}>\n              {userInfo.privacy === \"public\"\n                ? \"Toggle to private\"\n                : userInfo.privacy === \"private\"\n                ? \"Toggle to public\"\n                : null}\n            </MainBtn>\n          )}\n          <br />\n        </div>\n      </div>\n      <div\n        style={{ maxWidth: \"500px\" }}\n        className=\"ml-auto mr-auto mt-4 fade-in\"\n      >\n        <div style={{ padding: \"10px\" }} className=\"w-100\">\n          <Header3 className=\"mb-2\">My ships</Header3>\n        </div>\n      </div>\n      <Row className=\"mx-auto justify-content-center\">\n        <div style={{ width: \"900px\", maxWidth: \"900px\" }}>\n          <Row className=\"mx-auto justify-content-center\">\n            {myShips.map((ship, idx) => (\n              <Votecard ship={ship} disabled={true} />\n            ))}\n          </Row>\n        </div>\n      </Row>\n    </>\n  );\n};\n\nexport default Profile;\n",{"ruleId":"14","severity":1,"message":"15","line":91,"column":9,"nodeType":"16","messageId":"17","endLine":91,"endColumn":12},{"ruleId":"18","severity":1,"message":"19","line":176,"column":5,"nodeType":"20","endLine":176,"endColumn":72,"suggestions":"21"},{"ruleId":"14","severity":1,"message":"22","line":11,"column":10,"nodeType":"16","messageId":"17","endLine":11,"endColumn":23},"no-unused-vars","'res' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'deleteShip'. Either include it or remove the dependency array.","ArrayExpression",["23"],"'COOKIE_DOMAIN' is defined but never used.",{"desc":"24","fix":"25"},"Update the dependencies array to be: [ncol, filteredShips, userVotes, handleVote, updateShip, userEmail, deleteShip]",{"range":"26","text":"27"},[5586,5653],"[ncol, filteredShips, userVotes, handleVote, updateShip, userEmail, deleteShip]"]